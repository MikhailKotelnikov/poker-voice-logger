# Poker Nots Semantic Dictionary (v3)

Цель файла: хранить и обновлять словарь и правила, по которым свободная диктовка конвертируется в итоговую строку `nots` в твоем стиле.

Статус: рабочая версия на основе файла `Poker notes dictation and target notes Lines1-20.xlsx` (первая порция).

## 1) Базовые принципы

1. Это не простой поиск/замена, а семантический разбор диктовки.
2. На выходе всегда формируется короткая `nots`-запись в каноне.
3. Маркер `i` (я) обрабатывается отдельно от остальных токенов.
4. Одна и та же фраза может давать несколько смысловых токенов (действие + сила руки + контекст).
5. Числовые параметры всегда интерпретируются по ближайшему контексту, а не по одному универсальному правилу.

## 1.1) Переменные числовые параметры

Числа в диктовке могут означать разные сущности:

1. `sizing`: `25`, `33`, `50`, `66`, `75`, `100`, `175`...
2. `raise multiplier`: `2x`, `2x+`, `2.5x`...
3. `timing`: `0t`, `0.8t`, `1t`...
4. `spr`: `spr0.5`, `spr1`, `spr2`, `spr3`, `spr7`...
5. `event counter` (для профиля): `L2`, `L3`, `nuts2`, `nutfull3`...

Правило: без явного контекста число трактуется как `sizing`.

## 2) Слоты итоговой записи

Целевая запись собирается из слотов:

1. `street` (preflop/flop/turn/river/presupposition)
2. `actor` (`i` или оппонент по умолчанию)
3. `action_line` (`b`, `r`, `xr`, `xb`, `cb`, `tp`, `bb`, `bbb`, `bxb`, `d`)
4. `sizing` (`25`, `33`, `50`, `66`, `75`, `100`, `175`, `2x+`...)
5. `hand_or_equity` (`set`, `2p`, `tri`, `full`, `nuts`, `nutfull`, `fd`, `g`, `wrap`, `weak`)
6. `context` (`vsme`, `vsagro`, `vsreagro`, `onK94`, `onA833`, `onflush`, `4c/5c/6c`, `sprX`)
7. `interpretation` (`merge`, `as_bluff`, `unval`, `foldy`, `big`, `value`, `blockers`)

## 3) Канон токенов

### 3.1 Street

- `preflop`
- `flop`
- `turn`
- `river`
- `presupposition`

### 3.2 Actor and context

- `i` = я (маркер актера)
- `vsme` = против меня
- `vsagro` = против агро-оппонента
- `vsreagro` = против ре-агрессии
- `on...` = дескриптор борда (`onK94`, `on998`, `onA833`, `onJJ48`, `onflush`)
- `sprX` = stack-to-pot ratio c переменным X (`spr0.5`, `spr1`, `spr2`...)
- `4c` = 4-card PLO context
- `5c` = 5-card PLO context
- `6c` = 6-card PLO context

### 3.3 Actions and lines

- `b` = bet
- `r` = raise
- `c` = call
- `x` = check
- `ai` = all-in
- `xr` = check-raise
- `xb` = check-back
- `cb` = c-bet
- `tp` = turn probe
- `bb` = bet-bet
- `bbb` = bet-bet-bet
- `bxb` = bet-check-bet
- `d` = donk/lead
- `rb66` = raise then bet 66 on next street context

### 3.4 Hand/equity classes

- `weak`
- `draws`
- `fd`
- `g` (gutshot)
- `wrap`
- `set` / `sets`
- `2p`
- `tri`
- `full`
- `nuts`
- `nutfull`
- `blockers`

### 3.5 Interpretation classes (action/strategy)

- `merge`
- `as_bluff`
- `unval` (undervalue line; класс действия/линии, не класс руки)
- `foldy` (склонен к фолдам)
- `big`
- `value`
- `agro`, `agro+++` (уровни агрессии)
- `notaffraid` (не боится исполнять линию)

## 4) Нормализация канона

1. `l1`, `l2`, `l3` ... -> `L` (в одиночной записи без счетчика, uppercase для отличия от `i`).
2. `nutfull1`, `nutfull2` ... -> `nutfull`.
3. `nuts1`, `nuts2` ... -> `nuts`.
4. `vsrb66` семантически разбирается в `vs rb66` (внутри `rb66`: raise + bet66).
5. Символы `+++` сохраняются как усилитель (например, `agro+++`).
6. Если число стоит отдельно и нет явного признака другого типа, трактуется как `sizing`.

## 5) Семантические правила извлечения

1. Если в речи есть явная улица (флоп/терн/ривер/префлоп), запись идет в соответствующий слот.
2. Если улица не названа, но упомянуты `cb`/`tp`, улица выводится по линии:
- `cb` -> обычно `flop`
- `tp` -> `turn`
3. Если сказано "против меня", добавляется `vsme`.
4. Если сказано "на борде ...", формируется токен `on...`.
5. Если сказано "недовэльюбетил/недополучил велью", добавляется `unval`.
6. Если сказано "переагрессия/ответная агрессия", добавляется `vsreagro`.

## 6) Примеры (free phrase -> nots)

1. `на префлопе в тильте лайтово трибет и иногда 4бетит` -> `tilting lite 3b 4b`
2. `на флопе ставит полпота со слабыми и дровами` -> `50 weak, draws`
3. `на флопе поставил пот и выкинул на рейз на борде к94 против меня` -> `L 100 onK94 vsme`
4. `на флопе рейзит чуть больше 2х с врэпом на 998` -> `r2x+ wrap on998`
5. `на терне после чек-чек ставит пот и потом фолдит ривер` -> `tp100 L`
6. `на терне ставит дважды и пушит мерж с тузами против меня на jj48` -> `bb ai merge_AA vsme onJJ48`
7. `на ривере три барреля пуш, мерж-сет как блеф на флешовом борде` -> `bbb ai merge_set as_bluff onflush`
8. `на ривере думал долго, поставил 33 с натс фуллом` -> `0.8t 33 nutfull`
9. `на ривере я блеф 33 по линии бет чек бет` -> `i bl33 bxb`
10. `на ривере мгновенный чек-рейз пот с блокерами` -> `xr100 0t blockers`

## 7) Открытые точки (для следующего батча)

1. Фиксируем ли `set`/`sets` в один канон (`set`)?
2. Для `rb66` оставляем единый токен или всегда раскладываем на `r` + `b66`?
3. Для `L` в будущем профиле счетчик будет внешним атрибутом, не внутри единичной строки `nots`.

## 8) Mini-Glossary (token -> one-line meaning)

- `preflop` -> улица до флопа.
- `flop` -> первая постфлоп-улица.
- `turn` -> вторая постфлоп-улица.
- `river` -> третья постфлоп-улица.
- `presupposition` -> вывод/гипотеза о тенденции оппонента.
- `i` -> действие или линия относится к тебе.
- `vsme` -> действие выполнено против тебя.
- `vsagro` -> действие против агрессивного оппонента.
- `vsreagro` -> действие против ответной агрессии.
- `on...` -> контекст конкретного борда (например `onK94`).
- `onflush` -> контекст флешового борда.
- `4c` -> контекст 4-карточной PLO.
- `5c` -> контекст 5-карточной PLO.
- `6c` -> контекст 6-карточной PLO.
- `sprX` -> stack-to-pot ratio на улице (X = любое число).
- `b` -> ставка.
- `r` -> рейз.
- `c` -> колл.
- `x` -> чек.
- `ai` -> олл-ин.
- `xr` -> чек-рейз.
- `xb` -> чек-бэк в позиции.
- `cb` -> continuation bet.
- `tp` -> turn probe после пассивного флопа.
- `bb` -> линия bet-bet.
- `bbb` -> линия bet-bet-bet.
- `bxb` -> линия bet-check-bet.
- `d` -> donk/lead (ставка вне позиции в префлоп-агрессора).
- `rbXX` -> линия raise + bet с сайзингом XX на следующей улице.
- `N` (число само по себе) -> обычно сайзинг ставки/рейза в процентах пота.
- `2x` -> рейз в два раза от предыдущего размера.
- `2x+` -> рейз чуть больше 2x.
- `0t` -> мгновенное решение.
- `0.8t` -> долгое решение, около 80% тайм-окна.
- `L` -> light/слабая линия с последующим фолдом (без счетчика в одиночной записи).
- `tilting` -> состояние тильта.
- `lite` -> лайтовое отклонение от стандартного диапазона.
- `3b` -> 3-бет на префлопе.
- `4b` -> 4-бет на префлопе.
- `weak` -> слабая часть диапазона/руки.
- `draws` -> неготовые дровяные руки.
- `fd` -> флеш-дро.
- `g` -> гатшот.
- `wrap` -> сильное стрит-дро в PLO.
- `set` -> сет.
- `sets` -> сеты (множественное наблюдение класса).
- `2p` -> две пары.
- `tri` -> трипс.
- `full` -> фулл-хаус.
- `nuts` -> натсовая (лучшая) комбинация.
- `nutfull` -> натсовый фулл-хаус.
- `blockers` -> блокеры, влияющие на частоты колла/фолда.
- `merge` -> мержовая ставка средней частью диапазона.
- `merge_AA` -> мерж-линия, где отмечен конкретный класс руки AA.
- `merge_set` -> мерж-линия, где отмечен класс руки set.
- `as_bluff` -> линия исполнена как блеф.
- `unval` -> недобор велью/недовэльюбет (класс действия).
- `foldy` -> склонен к фолдам в подобном споте.
- `bighand` -> сильная готовая рука в контексте раздачи.
- `big` -> крупный пот/крупный сайзинг/крупное давление в контексте записи.
- `value` -> велью-линия.
- `agro` -> агрессивный стиль линии.
- `agro+++` -> сильно повышенная агрессия.
- `notaffraid` -> не боится исполнять агрессивную или тонкую линию.
- `opp` -> оппонент как целевой субъект в пресуппозиции.
- `blXX` -> блеф с сайзингом XX (например `bl33`).
