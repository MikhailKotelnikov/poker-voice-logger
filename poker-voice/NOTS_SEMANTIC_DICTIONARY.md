# Poker Nots Semantic Dictionary (v5)

Цель файла: хранить и обновлять словарь и правила, по которым свободная диктовка конвертируется в итоговую строку `nots` в твоем стиле.

Статус: рабочая версия на основе файлов:
- `Poker notes dictation and target notes Lines1-20.xlsx`
- `Poker notes dictation and target notes 14.02 5 lines.xlsx`
- `Poker notes dictation and target notes 14.02_2 6 lines.xlsx`

## 1) Базовые принципы

1. Это не простой поиск/замена, а семантический разбор диктовки.
2. На выходе всегда формируется короткая `nots`-запись в каноне.
3. Маркер `i` (я) обрабатывается отдельно от остальных токенов.
4. Одна и та же фраза может давать несколько смысловых токенов (действие + сила руки + контекст).
5. Числовые параметры всегда интерпретируются по ближайшему контексту, а не по одному универсальному правилу.

## 1.1) Переменные числовые параметры

Числа в диктовке могут означать разные сущности:

1. `sizing`: `25`, `33`, `50`, `66`, `75`, `100`, `175`...
2. `raise multiplier`: `2x`, `2x+`, `2.5x`...
3. `timing`: `0t`, `0.8t`, `1t`...
4. `spr`: `spr0.5`, `spr1`, `spr2`, `spr3`, `spr7`...
5. `event counter` (для профиля): `L2`, `L3`, `nuts2`, `nutfull3`...

Правило: без явного контекста число трактуется как `sizing`.

## 2) Слоты итоговой записи

Целевая запись собирается из слотов:

1. `street` (preflop/flop/turn/river/presupposition)
2. `actor` (`i` или оппонент по умолчанию)
3. `action_line` (`b`, `r`, `c`, `x`, `xr`, `xb`, `xc`, `xf`, `cb`, `tp`, `tpb`, `bb`, `bbb`, `bxb`, `d`, `limp`, `trib`)
4. `sizing` (`25`, `33`, `50`, `66`, `75`, `100`, `175`, `2x+`...)
5. `hand_or_equity` (`set`, `topset`, `2p`, `tri`, `full`, `nuts`, `nutfull`, `fd`, `nfd`, `g`, `wrap`, `weak`, `bu`, `bp`)
6. `context` (`vsme`, `vsagro`, `vsreagro`, `vsNN`, `onK94`, `onA833`, `onFD`, `onflush`, `onStrRiver`, `3bp`, `3w/4w`, `4c/5c/6c`, `sprX`)
7. `interpretation` (`merge`, `bluff`, `unval`, `foldy`, `big`, `huge`, `mid`, `value`, `blockers`, `z`, `much`)

## 3) Канон токенов

### 3.1 Street

- `preflop`
- `flop`
- `turn`
- `river`
- `presupposition`

### 3.2 Actor and context

- `i` = я (маркер актера)
- `he` = он (явный маркер второго субъекта внутри одной строки)
- `/` = переключение субъекта внутри одной записи (`i ... / he ...`)
- `vsme` = против меня
- `vsagro` = против агро-оппонента
- `vsreagro` = против ре-агрессии
- `on...` = дескриптор борда (`onK94`, `on998`, `onA833`, `onJJ48`, `onflush`)
- `onFD` = контекст борда с флеш-дро
- `onStrRiver` = стритовый ривер (в `str` имеется в виду `straight`, не `street`)
- `3bp` = 3-bet pot контекст
- `3w` = 3-way контекст
- `4w` = 4-way контекст
- `sprX` = stack-to-pot ratio c переменным X (`spr0.5`, `spr1`, `spr2`...)
- `4c` = 4-card PLO context
- `5c` = 5-card PLO context
- `6c` = 6-card PLO context

### 3.3 Actions and lines

- `b` = bet
- `r` = raise
- `c` = call
- `x` = check
- `ai` = all-in
- `xr` = check-raise
- `xb` = check-back
- `xc` = check-call
- `xf` = check-fold
- `cb` = c-bet
- `tp` = turn probe
- `tpb` = turn probe + river bet continuation
- `bb` = bet-bet
- `bbb` = bet-bet-bet
- `bxb` = bet-check-bet
- `d` = donk/lead
- `f` = fold
- `limp` = preflop limp
- `trib` = postflop 3-bet (отдельно от preflop `3b`)
- `rb66` = raise then bet 66 on next street context
- `minbet` = минимальный возможный sizing

### 3.4 Hand/equity classes

- `weak`
- `draws`
- `fd`
- `nfd` (nut flush draw)
- `g` (gutshot)
- `wrap`
- `set` / `sets`
- `topset`
- `2p`
- `tri`
- `full`
- `lowfull`
- `nuts`
- `nutfull`
- `nutflush`
- `3rd_flush`
- `blockers`
- `bu` = busted draw
- `bp` = bottom pair (единый токен, не split на `b` + `p`)
- `AA_nfd` (структурный состав: `AA` + `nfd`)
- `set_fd` (структурный состав: `set` + `fd`)
- `t_wrap` (структурный состав: `top pair` + `wrap`)
- `[rep_*]` = локальный represent-маркер (например, `[rep_topset]`)
- `[gc++]` / `[gc+++]` = локальный great-call маркер с градацией

### 3.5 Interpretation classes (action/strategy)

- `merge`
- `bluff`
- `unval` (undervalue line; класс действия/линии, не класс руки)
- `foldy` (склонен к фолдам)
- `big`
- `huge`
- `mid` (средний/средне-малый банк или давление)
- `value`
- `agro`, `agro+++` (уровни агрессии)
- `notaffraid` (не боится исполнять линию)
- `z` (зеркальная/непрямая линия: slowplay/control/unvalue с сильной рукой)
- `much` (частотный маркер: много/часто)

## 4) Нормализация канона

1. `l1`, `l2`, `l3` ... -> `L` (в одиночной записи без счетчика, uppercase для отличия от `i`).
2. `nutfull1`, `nutfull2` ... -> `nutfull`.
3. `nuts1`, `nuts2` ... -> `nuts`.
4. `vsrb66` семантически разбирается в `vs rb66` (внутри `rb66`: raise + bet66).
5. Символы `+++` сохраняются как усилитель (например, `agro+++`).
6. Если число стоит отдельно и нет явного признака другого типа, трактуется как `sizing`.
7. Для структурного состава руки сохраняем `_` (например, `AA_nfd`, `set_fd`, `3rd_flush`).
8. Если указан только `sizing` без `b/bb/bbb`, это все равно факт ставки; глубина линии считается незафиксированной.
9. Пары рангов в начале составного токена не фиксированы: `QJ_run_ts`, `AK_run_ds`, `98_run_ts` и т.п.
10. Для семейства `L` используются street-уточнения: `Lf`, `Lt`, `Lr`.

## 5) Семантические правила извлечения

1. Если в речи есть явная улица (флоп/терн/ривер/префлоп), запись идет в соответствующий слот.
2. Если улица не названа, но упомянуты `cb`/`tp`, улица выводится по линии:
- `cb` -> обычно `flop`
- `tp` -> `turn`
3. Если сказано "против меня", добавляется `vsme`.
4. Если сказано "на борде ...", формируется токен `on...`.
5. Если сказано "недовэльюбетил/недополучил велью", добавляется `unval`.
6. Если сказано "переагрессия/ответная агрессия", добавляется `vsreagro`.
7. `slash` (`/`) переключает субъекта в одной записи: до `/` один субъект, после `/` другой.
8. `he` обычно пишется только когда в той же строке уже есть другой субъект (например, `i ... / he ...`).
9. Если `3w/4w` не указано, по умолчанию spot считается heads-up (`2w`) и обычно не записывается.
10. `onStrRiver` использовать для стритового ривера (`str = straight`).
11. Квадратные скобки `[...]` в конце/внутри строки = локальная интерпретация или локальная presupposition.
12. `?` после токена/гипотезы = неуверенность, требует проверки.
13. Паттерн `vsNN` означает реакцию против sizing `NN` (например, `vs33`, `vs66`).

## 6) Примеры (free phrase -> nots)

1. `на префлопе в тильте лайтово трибет и иногда 4бетит` -> `tilting lite 3b 4b`
2. `на флопе ставит полпота со слабыми и дровами` -> `50 weak, draws`
3. `на флопе поставил пот и выкинул на рейз на борде к94 против меня` -> `L 100 onK94 vsme`
4. `на флопе рейзит чуть больше 2х с врэпом на 998` -> `r2x+ wrap on998`
5. `на терне после чек-чек ставит пот и потом фолдит ривер` -> `tp100 L`
6. `на терне ставит дважды и пушит мерж с тузами против меня на jj48` -> `bb ai merge_AA vsme onJJ48`
7. `на ривере три барреля пуш, мерж-сет как блеф на флешовом борде` -> `bbb ai merge_set bluff onflush`
8. `на ривере думал долго, поставил 33 с натс фуллом` -> `0.8t 33 nutfull`
9. `на ривере я блеф 33 по линии бет чек бет` -> `i bl33 bxb`
10. `на ривере мгновенный чек-рейз пот с блокерами` -> `xr100 0t blockers`
11. `на терне поставил тёрн-проб 50 с AA и натс флеш-дро в 6-карточной` -> `tp50 AA_nfd 6c`
12. `после тёрн-пробы продолжил ставку на ривере 75 с натс флешом на флешовом борде, 0.6 тайма, против меня` -> `tpb75 nutflush onflush 0.6t vsme`
13. `я блеф 33, а он сыграл зеркально с третьим флешом` -> `i bl33 / he z 3rd_flush`
14. `я поставил 66 в 4-вей на стритовом ривере, он выкинул` -> `i 66 4w onStrRiver / he f`
15. `он чекнул низкий фулл против меня и недобрал велью` -> `x lowfull vsme unval`
16. `на терне тёрн-проб 75 с сетом и флеш-дро` -> `tp75 set_fd`
17. `после тёрн-пробы продолжил 50, не доехало дро и нижняя пара, я сделал hero call++` -> `tpb50 0.6t bu_bp / i [gc++]`
18. `на терне тёрн-проб минбет и рука выкинута на ривере` -> `tp_minbet Lr`
19. `на ривере сыграл чек-фолд против 66 против меня` -> `xf vs66 vsme`
20. `на флопе рейз 2х против 33, рука выкинута на флопе, 3-бет-пот, я сыграл постфлоп 3-бет олл-ин` -> `r2x vs33 Lf 3bp on225 vsme / i trib ai`
21. `я сыграл чек-колл с топсетом на fd-доске в 3-way, он поставил пот с top-pair+wrap` -> `i xc topset onFD 3w / he 100 t_wrap onFD 3w [rep_topset]`
22. `заколлил top-pair+wrap в huge споте в 3-way против чек-рейз олл-ина на fd доске, 6-карточный` -> `c t_wrap huge 3w vsxr_ai onFD 6c [gc+++]`
23. `префлоп лимп с QJ-rundown triple-suit в 6-карточной` -> `limp QJ_run_ts 6c`
24. `ривер 0 тайм блеф в среднем банке, я зеркалю с фуллом` -> `0t bluff mid / i z full`

## 7) Открытые точки (для следующего батча)

1. Фиксируем ли `set`/`sets` в один канон (`set`)?
2. Для `rb66` оставляем единый токен или всегда раскладываем на `r` + `b66`?
3. Для `L` в будущем профиле счетчик будет внешним атрибутом, не внутри единичной строки `nots`.

## 8) Mini-Glossary (token -> one-line meaning)

- `preflop` -> улица до флопа.
- `flop` -> первая постфлоп-улица.
- `turn` -> вторая постфлоп-улица.
- `river` -> третья постфлоп-улица.
- `presupposition` -> вывод/гипотеза о тенденции оппонента.
- `i` -> действие или линия относится к тебе.
- `he` -> явный маркер второго субъекта (он) внутри той же строки.
- `/` -> переключатель субъекта внутри одной записи.
- `vsme` -> действие выполнено против тебя.
- `vsagro` -> действие против агрессивного оппонента.
- `vsreagro` -> действие против ответной агрессии.
- `on...` -> контекст конкретного борда (например `onK94`).
- `onflush` -> контекст флешового борда.
- `onStrRiver` -> контекст ривера, который закрыл/создал стрит.
- `3w` -> мультивей-спот с тремя игроками.
- `4w` -> мультивей-спот с четырьмя игроками.
- `4c` -> контекст 4-карточной PLO.
- `5c` -> контекст 5-карточной PLO.
- `6c` -> контекст 6-карточной PLO.
- `sprX` -> stack-to-pot ratio на улице (X = любое число).
- `b` -> ставка.
- `r` -> рейз.
- `c` -> колл.
- `x` -> чек.
- `ai` -> олл-ин.
- `xr` -> чек-рейз.
- `xb` -> чек-бэк в позиции.
- `xc` -> чек-колл.
- `xf` -> чек-фолд.
- `cb` -> continuation bet.
- `tp` -> turn probe после пассивного флопа.
- `tpb` -> turn probe на терне и продолжение ставки на ривере.
- `bb` -> линия bet-bet.
- `bbb` -> линия bet-bet-bet.
- `bxb` -> линия bet-check-bet.
- `d` -> donk/lead (ставка вне позиции в префлоп-агрессора).
- `f` -> fold.
- `limp` -> лимп на префлопе без предварительного рейза.
- `trib` -> постфлоп 3-бет (чтобы не путать с preflop `3b`).
- `minbet` -> минимально возможный сайзинг.
- `rbXX` -> линия raise + bet с сайзингом XX на следующей улице.
- `N` (число само по себе) -> обычно сайзинг ставки/рейза в процентах пота.
- `2x` -> рейз в два раза от предыдущего размера.
- `2x+` -> рейз чуть больше 2x.
- `0t` -> мгновенное решение.
- `0.8t` -> долгое решение, около 80% тайм-окна.
- `L` -> light/слабая линия с последующим фолдом (без счетчика в одиночной записи).
- `tilting` -> состояние тильта.
- `lite` -> лайтовое отклонение от стандартного диапазона.
- `3b` -> 3-бет на префлопе.
- `4b` -> 4-бет на префлопе.
- `weak` -> слабая часть диапазона/руки.
- `draws` -> неготовые дровяные руки.
- `fd` -> флеш-дро.
- `nfd` -> натсовое флеш-дро.
- `onFD` -> fd-структура борда (борд с флеш-дро).
- `g` -> гатшот.
- `wrap` -> сильное стрит-дро в PLO.
- `set` -> сет.
- `topset` -> топ-сет.
- `sets` -> сеты (множественное наблюдение класса).
- `2p` -> две пары.
- `tri` -> трипс.
- `full` -> фулл-хаус.
- `lowfull` -> низкий фулл-хаус.
- `nuts` -> натсовая (лучшая) комбинация.
- `nutfull` -> натсовый фулл-хаус.
- `nutflush` -> натсовый флеш.
- `3rd_flush` -> третий по силе флеш.
- `blockers` -> блокеры, влияющие на частоты колла/фолда.
- `bu` -> busted draw (недоехавшее дро).
- `bp` -> bottom pair (нижняя пара).
- `AA_nfd` -> состав руки: два туза плюс натсовое флеш-дро.
- `set_fd` -> состав руки: сет плюс флеш-дро.
- `t_wrap` -> состав: top pair + wrap.
- `RANK_run_ts/ds/dts` -> шаблон структуры руки: ранги + rundown + suitedness.
- `merge` -> мержовая ставка средней частью диапазона.
- `merge_AA` -> мерж-линия, где отмечен конкретный класс руки AA.
- `merge_set` -> мерж-линия, где отмечен класс руки set.
- `bluff` -> линия исполнена как блеф.
- `unval` -> недобор велью/недовэльюбет (класс действия).
- `foldy` -> склонен к фолдам в подобном споте.
- `bighand` -> сильная готовая рука в контексте раздачи.
- `big` -> крупный пот/крупный сайзинг/крупное давление в контексте записи.
- `huge` -> очень крупный/огромный пот или давление.
- `mid` -> средний или средне-малый пот/спот.
- `value` -> велью-линия.
- `agro` -> агрессивный стиль линии.
- `agro+++` -> сильно повышенная агрессия.
- `notaffraid` -> не боится исполнять агрессивную или тонкую линию.
- `opp` -> оппонент как целевой субъект в пресуппозиции.
- `blXX` -> блеф с сайзингом XX (например `bl33`).
- `z` -> зеркальная/непрямая линия (slowplay/control/unvalue с сильной рукой).
- `much` -> маркер высокой частоты действия (много/часто).
- `gc`, `gc++`, `gc+++` -> градация силы great call / hero call.
- `[ ... ]` -> локальная интерпретация/локальная presupposition внутри конкретной строки.
- `?` -> гипотеза под вопросом, требует проверки.
